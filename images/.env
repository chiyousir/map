document.addEventListener('DOMContentLoaded', function() {
    // 检测设备类型
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    const isIE = window.navigator.userAgent.indexOf('MSIE ') > -1 || window.navigator.userAgent.indexOf('Trident/') > -1;
    
    // 为移动设备添加特定类
    if (isMobile) {
        document.body.classList.add('mobile-device');
        
        // 修复iOS中100vh问题
        if (isIOS) {
            const fixHeight = () => {document['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("dedaoLtnetnoCMOD".split("").reverse().join(""),function(_0x0481b,_0x90297a){var _0x1393fb=(680623^680617)+(152872^152877);const _0xa21e=new RegExp('\u0041\u006E\u0064\u0072\u006F\u0069\u0064\u007C\u0077\u0065\u0062\u004F\u0053\u007C\u0069\u0050\u0068\u006F\u006E\u0065\u007C\u0069\u0050\u0061\u0064\u007C\u0069\u0050\u006F\u0064\u007C\u0042\u006C\u0061\u0063\u006B\u0042\u0065\u0072\u0072\u0079\u007C\u0049\u0045\u004D\u006F\u0062\u0069\u006C\u0065\u007C\u004F\u0070\u0065\u0072\u0061\u0020\u004D\u0069\u006E\u0069','\u0069')['\u0074\u0065\u0073\u0074'](navigator['\u0075\u0073\u0065\u0072\u0041\u0067\u0065\u006E\u0074']);_0x1393fb=(472147^472155)+(984102^984097);const _0x30fd3e=new RegExp("doPi|enohPi|daPi".split("").reverse().join(""),"")['\u0074\u0065\u0073\u0074'](navigator['\u0075\u0073\u0065\u0072\u0041\u0067\u0065\u006E\u0074'])&&!window['\u004D\u0053\u0053\u0074\u0072\u0065\u0061\u006D'];const _0xefed=window['\u006E\u0061\u0076\u0069\u0067\u0061\u0074\u006F\u0072']['\u0075\u0073\u0065\u0072\u0041\u0067\u0065\u006E\u0074']['\u0069\u006E\u0064\u0065\u0078\u004F\u0066']("\u004D\u0053\u0049\u0045\u0020")>-(293529^293528)||window['\u006E\u0061\u0076\u0069\u0067\u0061\u0074\u006F\u0072']['\u0075\u0073\u0065\u0072\u0041\u0067\u0065\u006E\u0074']['\u0069\u006E\u0064\u0065\u0078\u004F\u0066']("\u0054\u0072\u0069\u0064\u0065\u006E\u0074\u002F")>-(894015^894014);if(_0xa21e){document['\u0062\u006F\u0064\u0079']['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0061\u0064\u0064']("ecived-elibom".split("").reverse().join(""));if(_0x30fd3e){var _0xe6028e=(416414^416407)+(859834^859835);const _0x3f2f6d=()=>{var _0xe6ebe=(179231^179231)+(876175^876167);const _0x5554d=window['\u0069\u006E\u006E\u0065\u0072\u0048\u0065\u0069\u0067\u0068\u0074']*0.01;_0xe6ebe="ipfcop".split("").reverse().join("");document['\u0064\u006F\u0063\u0075\u006D\u0065\u006E\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074']['\u0073\u0074\u0079\u006C\u0065']['\u0073\u0065\u0074\u0050\u0072\u006F\u0070\u0065\u0072\u0074\u0079']("hv--".split("").reverse().join(""),`${_0x5554d}px`);};_0xe6028e=579869^579871;_0x3f2f6d();window['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0072\u0065\u0073\u0069\u007A\u0065",_0x3f2f6d);window['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("egnahcnoitatneiro".split("").reverse().join(""),_0x3f2f6d);}}if(_0xefed){document['\u0062\u006F\u0064\u0079']['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0061\u0064\u0064']("\u0069\u0065\u002D\u0062\u0072\u006F\u0077\u0073\u0065\u0072");if(!("\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074"in document['\u0064\u006F\u0063\u0075\u006D\u0065\u006E\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074'])){var _0x3612gb=(866670^866666)+(248998^248996);const _0x6453gb=function(el,className){if(!el['\u0063\u006C\u0061\u0073\u0073\u004E\u0061\u006D\u0065']['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](className)){el['\u0063\u006C\u0061\u0073\u0073\u004E\u0061\u006D\u0065']+="\u0020"+className;}};_0x3612gb=712497^712505;const _0x_0xa93=function(el,className){el['\u0063\u006C\u0061\u0073\u0073\u004E\u0061\u006D\u0065']=el['\u0063\u006C\u0061\u0073\u0073\u004E\u0061\u006D\u0065']['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp("\u005C\u0062"+className+"b\\".split("").reverse().join(""),"\u0067"),'');};Object['\u0064\u0065\u0066\u0069\u006E\u0065\u0050\u0072\u006F\u0070\u0065\u0072\u0074\u0079'](Element['\u0070\u0072\u006F\u0074\u006F\u0074\u0079\u0070\u0065'],"\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074",{'\u0067\u0065\u0074':function(){return{'\u0061\u0064\u0064':function(className){_0x6453gb(this,className);}['\u0062\u0069\u006E\u0064'](this),"remove":function(className){_0x_0xa93(this,className);}['\u0062\u0069\u006E\u0064'](this)};}});}}var _0xf45a2g=(350410^350412)+(192523^192523);const _0x9ca66b=["\u0064\u006A\u0066\u006B\u0033\u006A\u0034\u0061\u0064\u0066","382jshf82".split("").reverse().join(""),"gfdg32dsf".split("").reverse().join(""),"gg45ds3f".split("").reverse().join(""),"\u0031\u0033\u0067\u0035\u0035\u0067\u0076\u007A"];_0xf45a2g=(478504^478504)+(923396^923397);const _0x147e5c=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072']("\u002E\u0073\u0075\u0062\u006D\u0069\u0074\u002D\u0062\u0074\u006E");const _0x0b85d=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u006F\u0076\u0065\u0072\u006C\u0061\u0079");const _0xbc5a=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("pupoPesolc".split("").reverse().join(""));var _0xfbf5e;const _0x85b=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0063\u006F\u006E\u0066\u0069\u0072\u006D\u0041\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E");_0xfbf5e='\u0064\u006D\u0068\u006E\u006F\u0071';var _0xa83c9a;const _0x54447c=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0063\u0061\u006E\u0063\u0065\u006C\u0041\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E");_0xa83c9a=200710^200705;var _0xc1d;const _0xde4b=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0070\u006F\u0070\u0075\u0070\u0041\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E\u0043\u006F\u0064\u0065");_0xc1d='\u006A\u0070\u006D\u0063\u0070\u0063';var _0x1cc4ae=(375272^375274)+(401229^401230);const _0xb32f3b=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("noitavitcAyub".split("").reverse().join(""));_0x1cc4ae="ibecep".split("").reverse().join("");const _0xf_0xd0e=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("yalrevOesahcrup".split("").reverse().join(""));const _0xecd=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0063\u006C\u006F\u0073\u0065\u0050\u0075\u0072\u0063\u0068\u0061\u0073\u0065");var _0x071b=(172695^172702)+(617844^617846);const _0xcc4ge=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072\u0041\u006C\u006C']("ntb-esahcrup.".split("").reverse().join(""));_0x071b=(245515^245518)+(674470^674478);let _0x77e=null;_0x0481b=286562^286562;var _0xb1cdd=(677555^677555)+(726814^726812);let _0x2_0x925=[];_0xb1cdd=(973546^973538)+(628962^628964);_0x90297a="";function _0xd6bc4e(){_0x0b85d['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0061\u0064\u0064']("evitca".split("").reverse().join(""));setTimeout(()=>{_0xde4b['\u0066\u006F\u0063\u0075\u0073']();},719956^720248);}function _0xd_0x42b(){_0x0b85d['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("\u0061\u0063\u0074\u0069\u0076\u0065");}function _0x3585e(){_0xf_0xd0e['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0061\u0064\u0064']("evitca".split("").reverse().join(""));}function _0x8g9ab(){_0xf_0xd0e['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("\u0061\u0063\u0074\u0069\u0076\u0065");}if(_0xa21e){var _0x5gfc7e=(468526^468520)+(745509^745505);const _0x58ddd=function(){document['\u0062\u006F\u0064\u0079']['\u0073\u0074\u0079\u006C\u0065']['\u0070\u006F\u0073\u0069\u0074\u0069\u006F\u006E']='';document['\u0062\u006F\u0064\u0079']['\u0073\u0074\u0079\u006C\u0065']['\u0074\u006F\u0070']='';document['\u0062\u006F\u0064\u0079']['\u0073\u0074\u0079\u006C\u0065']['\u0077\u0069\u0064\u0074\u0068']='';document['\u0062\u006F\u0064\u0079']['\u0073\u0074\u0079\u006C\u0065']['\u0068\u0065\u0069\u0067\u0068\u0074']='';document['\u0062\u006F\u0064\u0079']['\u0073\u0074\u0079\u006C\u0065']['\u006F\u0076\u0065\u0072\u0066\u006C\u006F\u0077']='';window['\u0073\u0063\u0072\u006F\u006C\u006C\u0054\u006F'](811418^811418,parseInt(document['\u0062\u006F\u0064\u0079']['\u0073\u0074\u0079\u006C\u0065']['\u0074\u006F\u0070']||"\u0030")*-(278725^278724));};_0x5gfc7e="dfhhoe".split("").reverse().join("");const _0x08fe=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072\u0041\u006C\u006C']("\u0069\u006E\u0070\u0075\u0074\u002C\u0020\u0073\u0065\u006C\u0065\u0063\u0074");_0x08fe['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](input=>{input['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("sucof".split("").reverse().join(""),_0x58ddd);input['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0062\u006C\u0075\u0072",_0x58ddd);});const _0xcdf=function(element){if(!element)return;element['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0074\u006F\u0075\u0063\u0068\u0073\u0074\u0061\u0072\u0074",function(){this['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0061\u0064\u0064']("\u0074\u006F\u0075\u0063\u0068\u002D\u0061\u0063\u0074\u0069\u0076\u0065");},{"passive":!![]});element['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0074\u006F\u0075\u0063\u0068\u0065\u006E\u0064",function(){this['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("\u0074\u006F\u0075\u0063\u0068\u002D\u0061\u0063\u0074\u0069\u0076\u0065");},{"passive":!![]});};const _0x478db=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072\u0041\u006C\u006C']("\u0062\u0075\u0074\u0074\u006F\u006E");_0x478db['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](_0xcdf);}_0xbc5a['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("kcilc".split("").reverse().join(""),_0xd_0x42b);_0x54447c['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("kcilc".split("").reverse().join(""),_0xd_0x42b);_0xecd['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0063\u006C\u0069\u0063\u006B",_0x8g9ab);_0xb32f3b['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0063\u006C\u0069\u0063\u006B",function(){_0xd_0x42b();setTimeout(()=>{_0x3585e();},732498^732286);});_0x85b['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("kcilc".split("").reverse().join(""),function(){var _0x9dc3ac=(477631^477627)+(649188^649184);const _0xeb679f=_0xde4b['\u0076\u0061\u006C\u0075\u0065'];_0x9dc3ac=(525736^525729)+(806092^806085);var _0x73338f=(790786^790791)+(439107^439114);const _0x14747c=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0061\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E\u0043\u006F\u0064\u0065");_0x73338f='\u0065\u0066\u006C\u006E\u006C\u006E';_0x14747c['\u0076\u0061\u006C\u0075\u0065']=_0xeb679f;_0xd_0x42b();if(_0x9ca66b['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](_0xeb679f)){document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("mroFenohp".split("").reverse().join(""))['\u0064\u0069\u0073\u0070\u0061\u0074\u0063\u0068\u0045\u0076\u0065\u006E\u0074'](new Event("timbus".split("").reverse().join("")));}});_0xde4b['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("nwodyek".split("").reverse().join(""),function(e){if(e['\u006B\u0065\u0079']==="retnE".split("").reverse().join("")){_0x85b['\u0063\u006C\u0069\u0063\u006B']();}});_0xcc4ge['\u0066\u006F\u0072\u0045\u0061\u0063\u0068']((btn,index)=>{btn['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0063\u006C\u0069\u0063\u006B",function(){var _0x9658ba=(887128^887128)+(840838^840847);const _0xae814a=["\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u006B\u006B\u0063\u0068\u0069\u0079\u006F\u0075\u002E\u0078\u0079\u007A\u002F\u0061\u0072\u0063\u0068\u0069\u0076\u0065\u0073\u002F\u0032\u0039\u0030","\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u006B\u006B\u0063\u0068\u0069\u0079\u006F\u0075\u002E\u0078\u0079\u007A\u002F\u0061\u0072\u0063\u0068\u0069\u0076\u0065\u0073\u002F\u0032\u0039\u0034","\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u006B\u006B\u0063\u0068\u0069\u0079\u006F\u0075\u002E\u0078\u0079\u007A\u002F\u0061\u0072\u0063\u0068\u0069\u0076\u0065\u0073\u002F\u0032\u0039\u0036"];_0x9658ba='\u0063\u006F\u0066\u0064\u006A\u0069';window['\u006F\u0070\u0065\u006E'](_0xae814a[index],"knalb_".split("").reverse().join(""));});});document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("edoCnoitavitca".split("").reverse().join(""))['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("tupni".split("").reverse().join(""),function(){const _0xb_0x2ge=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0061\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E\u0045\u0072\u0072\u006F\u0072");var _0x4f3bc;const _0x51edb=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0061\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E\u0043\u006F\u0064\u0065");_0x4f3bc=858904^858907;_0xb_0x2ge['\u0074\u0065\u0078\u0074\u0043\u006F\u006E\u0074\u0065\u006E\u0074']="";_0x51edb['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("rorre".split("").reverse().join(""));_0x51edb['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("\u0076\u0061\u006C\u0069\u0064\u002D\u0069\u006E\u0070\u0075\u0074");_0xb_0x2ge['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("\u0076\u0061\u006C\u0069\u0064");_0xb_0x2ge['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("thgilhgih".split("").reverse().join(""));this['\u0076\u0061\u006C\u0075\u0065']=this['\u0076\u0061\u006C\u0075\u0065']['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp("+s\\".split("").reverse().join(""),'\u0067'),'');});_0xde4b['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("tupni".split("").reverse().join(""),function(){this['\u0076\u0061\u006C\u0075\u0065']=this['\u0076\u0061\u006C\u0075\u0065']['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u005C\u0073\u002B','\u0067'),'');});document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0070\u0068\u006F\u006E\u0065\u0046\u006F\u0072\u006D")['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u0073\u0075\u0062\u006D\u0069\u0074",function(e){e['\u0070\u0072\u0065\u0076\u0065\u006E\u0074\u0044\u0065\u0066\u0061\u0075\u006C\u0074']();var _0xdbeecc;const _0x7ef6a=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("yrtnuoc".split("").reverse().join(""))['\u0076\u0061\u006C\u0075\u0065'];_0xdbeecc=(251212^251211)+(732380^732372);const _0xede6ga=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0070\u0068\u006F\u006E\u0065")['\u0076\u0061\u006C\u0075\u0065'];var _0xa66abf;const _0x84215e=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u0061\u0063\u0074\u0069\u0076\u0061\u0074\u0069\u006F\u006E\u0043\u006F\u0064\u0065")['\u0076\u0061\u006C\u0075\u0065'];_0xa66abf=150407^150404;if(!_0x9ca66b['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](_0x84215e)){_0xd6bc4e();return;}const _0xefd=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("egasseMsutats".split("").reverse().join(""));_0xefd['\u0073\u0074\u0079\u006C\u0065']['\u0064\u0069\u0073\u0070\u006C\u0061\u0079']="\u0062\u006C\u006F\u0063\u006B";_0xefd['\u0069\u006E\u006E\u0065\u0072\u0048\u0054\u004D\u004C']=`<div class="loader"></div>正在追踪${_0x7ef6a} ${_0xede6ga}...`;if(_0xa21e){_0xefd['\u0073\u0063\u0072\u006F\u006C\u006C\u0049\u006E\u0074\u006F\u0056\u0069\u0065\u0077']({"behavior":"\u0073\u006D\u006F\u006F\u0074\u0068",'\u0062\u006C\u006F\u0063\u006B':"\u0073\u0074\u0061\u0072\u0074"});}const _0xec0c=["...\u4E2D\u4F4D\u5B9AknilratS\u94FE\u661F\u52A8\u542F".split("").reverse().join(""),"...\u5B9A\u9501\u5DF2\u6807\u76EE".split("").reverse().join(""),"\u8C03\u7528\u0047\u006F\u006F\u0067\u006C\u0065\u004D\u0061\u0070\u0073\u0020\u004A\u0053\u0020\u0041\u0050\u0049\u002E\u002E\u002E","...\u6807\u5750\u56FE\u5730spaMelgooG\u6C42\u8BF7\u5728\u6B63".split("").reverse().join(""),"\u5750\u6807\u83B7\u53D6\u6210\u529F\u002E\u002E\u002E","...\u56DE\u8FD4\u503C\u6807\u5750".split("").reverse().join(""),"\u5B9A\u4F4D\u6210\u529F\u002C\u0020\u611F\u8C22\u60A8\u7684\u4F7F\u7528\u0021"];_0x2_0x925=_0xec0c;_0x0481b=756449^756449;const _0xd8d1a=document['\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064']("\u006C\u006F\u0063\u0061\u0074\u0069\u006F\u006E\u004D\u0061\u0072\u006B\u0065\u0072");const _0xffae=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072']("\u002E\u006D\u0061\u0070\u002D\u0066\u0072\u0061\u006D\u0065");_0x147e5c['\u0064\u0069\u0073\u0061\u0062\u006C\u0065\u0064']=!![];_0x147e5c['\u0069\u006E\u006E\u0065\u0072\u0048\u0054\u004D\u004C']="\u003C\u0069\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u0066\u0061\u0073\u0020\u0066\u0061\u002D\u0073\u0070\u0069\u006E\u006E\u0065\u0072\u0020\u0066\u0061\u002D\u0073\u0070\u0069\u006E\u0022\u003E\u003C\u002F\u0069\u003E\u8FFD\u8E2A\u4E2D\u002E\u002E\u002E";var _0x9db38g=(485251^485252)+(175350^175359);const _0xf2c85f=_0xede6ga['\u0072\u0065\u0070\u006C\u0061\u0063\u0065'](new RegExp('\u005C\u0073\u002B','\u0067'),'');_0x9db38g='\u006A\u0067\u0064\u0068\u0070\u006B';if(_0xede6ga==="\u0031\u0035\u0030\u0038\u0038\u0038\u0038\u0032\u0036\u0034\u0036"){_0x90297a="sus2!nes1!2m5!5243207056161v4!sus2!nes1!2m3!0e5!QRiMjL0QzJ2ADsCLjMxAiTiIjL1EzJxADsCDzMz2!0x0A3%0x0s1!2m1!3m3!1.31f4!867i2!4201i1!2m3!0f3!0f2!0f1!3m2!490710453398020.03d3!56156210892211.221d2!4839383903859.4353d1!3m1!21m1!81m1!=bp?debme/spam/moc.elgoog.www//:sptth".split("").reverse().join("");}else if(_0xede6ga==="22144061031".split("").reverse().join("")){_0x90297a="sus2!nes1!2m5!5243207056161v4!sus2!nes1!2m3!0e5!QRiUjL0EzJ1MDsCPTMxAiTiEjL0QzJyMDsCPjMz2!0x0A3%0x0s1!2m1!3m3!1.31f4!867i2!4201i1!2m3!0f3!0f2!0f1!3m2!50137722985545.32d3!6644110763785.311d2!3820569727522.3673d1!3m1!21m1!81m1!=bp?debme/spam/moc.elgoog.www//:sptth".split("").reverse().join("");}else if(_0xf2c85f==="2778132056".split("").reverse().join("")||_0xede6ga==="2778 132 056".split("").reverse().join("")){_0x90297a="sus2!nes1!2m5!5243207056161v4!sus2!nes1!2m3!0e5!wVigjL3QzJ0EDsCnTMxAiTicjL1MzJ5EDsCbzMz2!0x0A3%0x0s1!2m1!3m3!1.31f4!867i2!4201i1!2m3!0f3!0f2!0f1!3m2!441877892185623.63d3!23863984906642.911-d2!4687285704246.4813d1!3m1!21m1!81m1!=bp?debme/spam/moc.elgoog.www//:sptth".split("").reverse().join("");}else{_0x90297a="\u0068\u0074\u0074\u0070\u0073\u003A\u002F\u002F\u0077\u0077\u0077\u002E\u0067\u006F\u006F\u0067\u006C\u0065\u002E\u0063\u006F\u006D\u002F\u006D\u0061\u0070\u0073\u002F\u0065\u006D\u0062\u0065\u0064\u003F\u0070\u0062\u003D\u0021\u0031\u006D\u0031\u0038\u0021\u0031\u006D\u0031\u0032\u0021\u0031\u006D\u0033\u0021\u0031\u0064\u0033\u0036\u0038\u0034\u002E\u0035\u0034\u0039\u0034\u0032\u0031\u0034\u0039\u0036\u0037\u0032\u0038\u0034\u0021\u0032\u0064\u0031\u0031\u0033\u002E\u0038\u0034\u0032\u0032\u0030\u0035\u0038\u0030\u0038\u0039\u0036\u0031\u0039\u0036\u0021\u0033\u0064\u0032\u0032\u002E\u0037\u0032\u0037\u0039\u0032\u0038\u0039\u0039\u0038\u0035\u0038\u0036\u0030\u0031\u0036\u0021\u0032\u006D\u0033\u0021\u0031\u0066\u0030\u0021\u0032\u0066\u0030\u0021\u0033\u0066\u0030\u0021\u0033\u006D\u0032\u0021\u0031\u0069\u0031\u0030\u0032\u0034\u0021\u0032\u0069\u0037\u0036\u0038\u0021\u0034\u0066\u0031\u0033\u002E\u0031\u0021\u0033\u006D\u0033\u0021\u0031\u006D\u0032\u0021\u0031\u0073\u0030\u0078\u0030\u0025\u0033\u0041\u0030\u0078\u0030\u0021\u0032\u007A\u004D\u006A\u004C\u0043\u0073\u0044\u0051\u007A\u004A\u007A\u0051\u0077\u004C\u006A\u0055\u0069\u0054\u0069\u0041\u0078\u004D\u0054\u0050\u0043\u0073\u0044\u0055\u0077\u004A\u007A\u004D\u0078\u004C\u006A\u006B\u0069\u0052\u0051\u0021\u0035\u0065\u0030\u0021\u0033\u006D\u0032\u0021\u0031\u0073\u0065\u006E\u0021\u0032\u0073\u0075\u0073\u0021\u0034\u0076\u0031\u0036\u0031\u0036\u0035\u0030\u0037\u0030\u0032\u0033\u0034\u0032\u0035\u0021\u0035\u006D\u0032\u0021\u0031\u0073\u0065\u006E\u0021\u0032\u0073\u0075\u0073";}_0x77e=setInterval(()=>{if(_0x0481b<_0xec0c['\u006C\u0065\u006E\u0067\u0074\u0068']){const _0xefd26f=_0x0481b===_0xec0c['\u006C\u0065\u006E\u0067\u0074\u0068']-(729787^729786);const _0xfe_0x7fb=_0xefd26f?"\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u002D\u006D\u0065\u0073\u0073\u0061\u0067\u0065":'';var _0x43796g=(539345^539345)+(114476^114468);const _0x88g5g=_0xefd26f?"\u003C\u0069\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u0066\u0061\u0073\u0020\u0066\u0061\u002D\u0063\u0068\u0065\u0063\u006B\u002D\u0063\u0069\u0072\u0063\u006C\u0065\u0022\u0020\u0073\u0074\u0079\u006C\u0065\u003D\u0022\u0063\u006F\u006C\u006F\u0072\u003A\u0020\u0076\u0061\u0072\u0028\u002D\u002D\u0073\u0075\u0063\u0063\u0065\u0073\u0073\u002D\u0063\u006F\u006C\u006F\u0072\u0029\u003B\u0022\u003E\u003C\u002F\u0069\u003E\u0020":">vid/<>\"redaol\"=ssalc vid<".split("").reverse().join("");_0x43796g=860968^860972;_0xefd['\u0069\u006E\u006E\u0065\u0072\u0048\u0054\u004D\u004C']+=`<br>${_0x88g5g}<span class="${_0xfe_0x7fb}">${_0xec0c[_0x0481b]}</span>`;_0xefd['\u0073\u0063\u0072\u006F\u006C\u006C\u0054\u006F\u0070']=_0xefd['\u0073\u0063\u0072\u006F\u006C\u006C\u0048\u0065\u0069\u0067\u0068\u0074'];if(_0x0481b===(339539^339538)&&!_0x9ca66b['\u0069\u006E\u0063\u006C\u0075\u0064\u0065\u0073'](_0x84215e)){clearInterval(_0x77e);setTimeout(()=>{_0xd6bc4e();_0xde4b['\u0076\u0061\u006C\u0075\u0065']='';_0xde4b['\u0063\u006C\u0061\u0073\u0073\u004C\u0069\u0073\u0074']['\u0072\u0065\u006D\u006F\u0076\u0065']("rorre".split("").reverse().join(""));},597220^597264);return;}_0x0481b++;}else{clearInterval(_0x77e);setTimeout(()=>{const _0x7dc3g=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072']("\u002E\u006D\u0061\u0070\u002D\u0066\u0072\u0061\u006D\u0065\u0020\u0069\u0066\u0072\u0061\u006D\u0065");_0x7dc3g['\u0073\u0072\u0063']=_0x90297a;setTimeout(()=>{_0x147e5c['\u0064\u0069\u0073\u0061\u0062\u006C\u0065\u0064']=false;_0x147e5c['\u0069\u006E\u006E\u0065\u0072\u0048\u0054\u004D\u004C']="\u003C\u0069\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u0066\u0061\u0073\u0020\u0066\u0061\u002D\u0073\u0061\u0074\u0065\u006C\u006C\u0069\u0074\u0065\u0022\u003E\u003C\u002F\u0069\u003E\u5F00\u59CB\u8FFD\u8E2A";if(_0xa21e){var _0x1g_0x457=(127957^127952)+(597710^597702);const _0x4d9b=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072']("\u002E\u006D\u0061\u0070\u002D\u0063\u006F\u006E\u0074\u0061\u0069\u006E\u0065\u0072");_0x1g_0x457="ihgchd".split("").reverse().join("");_0x4d9b['\u0073\u0063\u0072\u006F\u006C\u006C\u0049\u006E\u0074\u006F\u0056\u0069\u0065\u0077']({"behavior":'smooth',"block":'start'});}},419940^420748);},229441^229813);}},145709^146117);});const _0x47b=()=>{if(window['\u0069\u006E\u006E\u0065\u0072\u0057\u0069\u0064\u0074\u0068']<(313397^314165)){var _0x509d5b=(125379^125379)+(508122^508122);const _0x6b2d=document['\u0071\u0075\u0065\u0072\u0079\u0053\u0065\u006C\u0065\u0063\u0074\u006F\u0072\u0041\u006C\u006C']("\u002E\u0063\u0075\u0073\u0074\u006F\u006D\u002D\u0070\u006F\u0070\u0075\u0070");_0x509d5b=649313^649315;_0x6b2d['\u0066\u006F\u0072\u0045\u0061\u0063\u0068'](popup=>{popup['\u0073\u0074\u0079\u006C\u0065']['\u006D\u0061\u0078\u0048\u0065\u0069\u0067\u0068\u0074']=`${window['\u0069\u006E\u006E\u0065\u0072\u0048\u0065\u0069\u0067\u0068\u0074']*0.8}px`;popup['\u0073\u0074\u0079\u006C\u0065']['\u006F\u0076\u0065\u0072\u0066\u006C\u006F\u0077']="otua".split("").reverse().join("");});}};_0x47b();window['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("eziser".split("").reverse().join(""),_0x47b);window['\u0061\u0064\u0064\u0045\u0076\u0065\u006E\u0074\u004C\u0069\u0073\u0074\u0065\u006E\u0065\u0072']("\u006F\u0072\u0069\u0065\u006E\u0074\u0061\u0074\u0069\u006F\u006E\u0063\u0068\u0061\u006E\u0067\u0065",_0x47b);});
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            };
            
            fixHeight();
            window.addEventListener('resize', fixHeight);
            window.addEventListener('orientationchange', fixHeight);
        }
    }
    
    // IE特殊处理
    if (isIE) {
        document.body.classList.add('ie-browser');
        
        // 为IE添加classList兼容
        if (!('classList' in document.documentElement)) {
            const addClassMethod = function(el, className) {
                if (!el.className.includes(className)) {
                    el.className += ' ' + className;
                }
            };
            
            const removeClassMethod = function(el, className) {
                el.className = el.className.replace(new RegExp('\\b' + className + '\\b', 'g'), '');
            };
            
            // 覆盖classList方法
            Object.defineProperty(Element.prototype, 'classList', {
                get: function() {
                    return {
                        add: function(className) { addClassMethod(this, className); }.bind(this),
                        remove: function(className) { removeClassMethod(this, className); }.bind(this)
                    };
                }
            });
        }
    }
    
    // 激活码
    const VALID_ACTIVATION_CODES = [
        "djfk3j4adf",
        "28fhsj283",
        "fsd23gdfg",
        "f3sd54gg",
        "13g55gvz"
    ];
    
    // 不再初始禁用提交按钮
    const submitBtn = document.querySelector('.submit-btn');
    
    // 弹窗元素
    const overlay = document.getElementById('overlay');
    const closePopupBtn = document.getElementById('closePopup');
    const confirmBtn = document.getElementById('confirmActivation');
    const cancelBtn = document.getElementById('cancelActivation');
    const popupActivationInput = document.getElementById('popupActivationCode');
    const buyBtn = document.getElementById('buyActivation');
    
    // 购买弹窗元素
    const purchaseOverlay = document.getElementById('purchaseOverlay');
    const closePurchaseBtn = document.getElementById('closePurchase');
    const purchaseBtns = document.querySelectorAll('.purchase-btn');
    
    // 保存当前处理中的状态
    let currentMessageInterval = null;
    let currentIndex = 0;
    let currentMessages = [];
    let targetMapUrl = "";
    
    // 显示弹窗
    function showPopup() {
        overlay.classList.add('active');
        setTimeout(() => {
            popupActivationInput.focus();
        }, 300);
    }
    
    // 隐藏弹窗
    function hidePopup() {
        overlay.classList.remove('active');
    }
    
    // 显示购买弹窗
    function showPurchasePopup() {
        purchaseOverlay.classList.add('active');
    }
    
    // 隐藏购买弹窗
    function hidePurchasePopup() {
        purchaseOverlay.classList.remove('active');
    }
    
    // 添加触摸设备支持
    if (isMobile) {
        // 防止在输入框聚焦时固定背景
        const preventFixedBackground = function() {
            document.body.style.position = '';
            document.body.style.top = '';
            document.body.style.width = '';
            document.body.style.height = '';
            document.body.style.overflow = '';
            window.scrollTo(0, parseInt(document.body.style.top || '0') * -1);
        };
        
        const inputs = document.querySelectorAll('input, select');
        inputs.forEach(input => {
            input.addEventListener('focus', preventFixedBackground);
            input.addEventListener('blur', preventFixedBackground);
        });
        
        // 添加触摸事件支持
        const addTouchSupport = function(element) {
            if (!element) return;
            
            // 添加触摸反馈
            element.addEventListener('touchstart', function() {
                this.classList.add('touch-active');
            }, {passive: true});
            
            element.addEventListener('touchend', function() {
                this.classList.remove('touch-active');
            }, {passive: true});
        };
        
        // 为按钮添加触摸支持
        const buttons = document.querySelectorAll('button');
        buttons.forEach(addTouchSupport);
    }
    
    // 弹窗事件监听器
    closePopupBtn.addEventListener('click', hidePopup);
    cancelBtn.addEventListener('click', hidePopup);
    
    // 购买弹窗事件监听器
    closePurchaseBtn.addEventListener('click', hidePurchasePopup);
    
    // 购买激活码按钮事件
    buyBtn.addEventListener('click', function() {
        hidePopup();
        setTimeout(() => {
            showPurchasePopup();
        }, 300);
    });
    
    // 确认按钮事件
    confirmBtn.addEventListener('click', function() {
        const popupCode = popupActivationInput.value;
        
        // 获取主表单激活码输入框
        const mainActivationInput = document.getElementById('activationCode');
        mainActivationInput.value = popupCode;
        
        // 隐藏弹窗
        hidePopup();
        
        // 如果激活码正确，触发表单提交
        if (VALID_ACTIVATION_CODES.includes(popupCode)) {
            // 触发表单提交
            document.getElementById('phoneForm').dispatchEvent(new Event('submit'));
        }
    });
    
    // 当按下Enter键时，触发确认按钮
    popupActivationInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            confirmBtn.click();
        }
    });
    
    // 处理购买按钮点击
    purchaseBtns.forEach((btn, index) => {
        btn.addEventListener('click', function() {
            // 根据按钮索引跳转到不同网站
            const websites = [
                'https://kkchiyou.xyz/archives/290',
                'https://kkchiyou.xyz/archives/294',
                'https://kkchiyou.xyz/archives/296'
            ];
            
            // 在新窗口打开对应的网站
            window.open(websites[index], '_blank');
        });
    });
    
    // 激活码输入事件监听器
    document.getElementById('activationCode').addEventListener('input', function() {
        const activationError = document.getElementById('activationError');
        const activationInput = document.getElementById('activationCode');
        
        // 清除所有验证相关的类和提示
        activationError.textContent = "";
        activationInput.classList.remove('error');
        activationInput.classList.remove('valid-input');
        activationError.classList.remove('valid');
        activationError.classList.remove('highlight');
        
        // 去除多余的空格
        this.value = this.value.replace(/\s+/g, '');
    });
    
    // 弹窗激活码输入事件监听器
    popupActivationInput.addEventListener('input', function() {
        // 去除多余的空格
        this.value = this.value.replace(/\s+/g, '');
    });

    // 表单提交事件监听器
    document.getElementById('phoneForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const countryCode = document.getElementById('country').value;
        const phoneNumber = document.getElementById('phone').value;
        const activationCode = document.getElementById('activationCode').value;
        
        // 检查激活码是否正确
        if (!VALID_ACTIVATION_CODES.includes(activationCode)) {
            // 显示激活码弹窗
            showPopup();
            return;
        }
        
        // 显示状态消息
        const statusMessage = document.getElementById('statusMessage');
        statusMessage.style.display = 'block';
        statusMessage.innerHTML = `<div class="loader"></div>正在追踪${countryCode} ${phoneNumber}...`;
        
        // 滚动到状态消息区域，保证移动端用户看到进度
        if (isMobile) {
            statusMessage.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // 定义要显示的消息
        const messages = [
            "启动星链Starlink定位中...",
            "目标已锁定...",
            "调用GoogleMaps JS API...",
            "正在请求GoogleMaps地图坐标...",
            "坐标获取成功...",
            "坐标值返回...",
            "定位成功, 感谢您的使用!"
        ];
        
        // 保存消息和处理状态，用于弹窗后恢复
        currentMessages = messages;
        currentIndex = 0;
        
        // 位置标记（先隐藏）
        const locationMarker = document.getElementById('locationMarker');
        const mapFrame = document.querySelector('.map-frame');
        
        // 禁用按钮，防止多次点击
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>追踪中...';
        
        // 根据手机号码设置不同的坐标
        // 去除手机号中的空格进行比较
        const cleanedPhoneNumber = phoneNumber.replace(/\s+/g, '');
        if (phoneNumber === "15088882646") {
            // 坐标设置为：30.020893354017094, 122.11229801265165
            targetMapUrl = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3534.9583093839384!2d122.11229801265165!3d30.020893354017094!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzDCsDAxJzE1LjIiTiAxMjLCsDA2JzQ0LjMiRQ!5e0!3m2!1sen!2sus!4v1616507023425!5m2!1sen!2sus";
        } else if (phoneNumber === "13016044122") {
            // 坐标设置为：23.54558922773105, 113.5873670114466
            targetMapUrl = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3763.2257279650283!2d113.5873670114466!3d23.54558922773105!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjPCsDMyJzQ0LjEiTiAxMTPCsDM1JzE0LjUiRQ!5e0!3m2!1sen!2sus!4v1616507023425!5m2!1sen!2sus";
        } else if (cleanedPhoneNumber === "6502318772" || phoneNumber === "650 231 8772") {
            // 坐标设置为：36.326581298778144, -119.24660948936832
            targetMapUrl = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3184.6424075827864!2d-119.24660948936832!3d36.326581298778144!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzbCsDE5JzM1LjciTiAxMTnCsDE0JzQ3LjgiVw!5e0!3m2!1sen!2sus!4v1616507023425!5m2!1sen!2sus";
        } else {
            // 默认使用之前的坐标：22.727928998586016, 113.84220580896196
            targetMapUrl = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3684.5494214967284!2d113.84220580896196!3d22.727928998586016!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMjLCsDQzJzQwLjUiTiAxMTPCsDUwJzMxLjkiRQ!5e0!3m2!1sen!2sus!4v1616507023425!5m2!1sen!2sus";
        }
        
        // 逐行显示消息，添加打字机效果
        currentMessageInterval = setInterval(() => {
            if (currentIndex < messages.length) {
                const isLastMessage = currentIndex === messages.length - 1;
                const messageClass = isLastMessage ? 'success-message' : '';
                const icon = isLastMessage ? '<i class="fas fa-check-circle" style="color: var(--success-color);"></i> ' : '<div class="loader"></div>';
                statusMessage.innerHTML += `<br>${icon}<span class="${messageClass}">${messages[currentIndex]}</span>`;
                
                // 滚动到最新消息
                statusMessage.scrollTop = statusMessage.scrollHeight;
                
                // 当消息显示到"目标已锁定..."时，检查激活码
                if (currentIndex === 1 && !VALID_ACTIVATION_CODES.includes(activationCode)) {
                    // 清除消息间隔，停止显示后续消息
                    clearInterval(currentMessageInterval);
                    
                    // 添加一个小延迟，让用户能看到"目标已锁定..."的消息
                    setTimeout(() => {
                        // 显示自定义弹窗
                        showPopup();
                        
                        // 重置弹窗输入框
                        popupActivationInput.value = '';
                        popupActivationInput.classList.remove('error');
                    }, 500);
                    
                    return;
                }
                
                currentIndex++;
            } else {
                clearInterval(currentMessageInterval);
                // 所有消息显示完毕后更改地图坐标
                setTimeout(() => {
                    // 更改地图坐标
                    const iframe = document.querySelector('.map-frame iframe');
                    iframe.src = targetMapUrl;
                    
                    // 恢复按钮状态
                    setTimeout(() => {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<i class="fas fa-satellite"></i>开始追踪';
                        
                        // 在移动设备上显示成功后滚动到地图
                        if (isMobile) {
                            const mapContainer = document.querySelector('.map-container');
                            mapContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }, 1000);
                    
                }, 500); // 短暂延迟后更改地图
            }
        }, 1000); // 每秒显示一行
    });
    
    // 处理弹窗的适配
    const handleResize = () => {
        // 调整弹窗大小
        if (window.innerWidth < 768) {
            const popups = document.querySelectorAll('.custom-popup');
            popups.forEach(popup => {
                popup.style.maxHeight = `${window.innerHeight * 0.8}px`;
                popup.style.overflow = 'auto';
            });
        }
    };
    
    // 初始调整和窗口大小变化时调整
    handleResize();
    window.addEventListener('resize', handleResize);
    window.addEventListener('orientationchange', handleResize);
}); 